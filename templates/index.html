<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asha A.I.ðŸš€ Bot</title>
    <style>
        /* Add this CSS to your stylesheet */

        .p-cont {
            position: absolute;
            top: 10px;
            right: 20px;
            /* Needed to position the dropdown relative to this container */
            display: inline-block;
            /* Or flex/grid depending on your layout */
            cursor: pointer;
            /* Indicate that it's interactive */
        }

        .icon .profile-img {
            width: 40px;
            /* Adjust size as needed */
            height: 40px;
            border-radius: 50%;
            /* Make it round */
            vertical-align: middle;
            /* Align with surrounding text/elements */
        }


        .profile-dropdown {
            position: absolute;
            background-color: #fff;
            top: 40px;
            right: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            min-width: 200px;
            z-index: 1000;
            margin-top: 10px;
            height: 0%;
            /* opacity: 0; */
            /* height: 0; */
            overflow: hidden;
        }

        .p-cont:active .profile-dropdown {
            height: 100%;
        }

        /* **ANCHOR - atharv */

        /* Style the dropdown header */
        .dropdown-header {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            /* Separator line */
        }

        .dropdown-header .profile-img-large {
            width: 50px;
            /* Larger image in the header */
            height: 50px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .dropdown-header .user-name {
            font-weight: bold;
            color: #333;
        }

        /* Style the dropdown menu list */
        .dropdown-menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .dropdown-menu-list li a {
            display: flex;
            /* Use flexbox for alignment */
            align-items: center;
            padding: 10px;
            text-decoration: none;
            color: #555;
            transition: background-color 0.2s ease;
            /* Smooth hover effect */
        }

        .dropdown-menu-list li a:hover {
            background-color: #f0f0f0;
            /* Highlight on hover */
        }

        .dropdown-menu-list li a i {
            margin-right: 10px;
            /* Space between icon and text */
            font-size: 18px;
            /* Adjust icon size */
        }

        .dropdown-menu-list li a .arrow-icon {
            margin-left: auto;
            /* Push the arrow to the right */
            margin-right: 0;
            font-size: 16px;
            color: #999;
        }

        .icon .p-icon {
            font-size: 24px;
            color: #333;
        }

        .icon img {
            filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.5));
            transition: all .5s;
        }

        .icon img:hover {
            filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 1));
        }
    </style>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
        integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        body {
            overflow: hidden;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="chat-container">
        <h1>Asha AI Bot ðŸš€</h1>
        <div class="chat-box" id="chat-box">
            <div class="message bot">Hey there! ðŸ‘‹ Welcome to ASHA A.I.!, your virtual guide for exploring career
                opportunities,
                especially for women in India. How can I assist you today? âœ¨</div>
        </div>
        <div class="message bot typing-indicator" id="typing-indicator" style="display: none;">
            <span></span><span></span><span></span>
        </div>
        <div class="suggestions-container" id="suggestions-container"></div>
        <div class="chat-input">
            <button id="mic-button" title="Use Voice Input" aria-label="Use voice input"><i
                    class="ri-mic-ai-line"></i></button> <textarea id="user-input"
                placeholder="Ask about jobs, interviews..." rows="1" aria-label="Chat input"></textarea>
            <button id="send-button" aria-label="Send message">Send</button>
            <button id="clear-button" title="Clear Chat History" aria-label="Clear chat history">Clear</button>
        </div>
    </div>
    <div class="p-cont">
        <div class="icon">
            {% if user and user.profile_pic %}
            <img src="{{ user.profile_pic }}" alt="Profile" class="profile-img">
            {% else %}
            <i class="ri-user-fill p-icon"></i>
            {% endif %}
        </div>
        <div class="profile-dropdown">
            <div class="dropdown-header">
                {% if user and user.profile_pic %}
                <img src="{{ user.profile_pic }}" alt="Profile" class="profile-img-large">
                {% else %}
                <img src="{{ url_for('static', filename='images/default_profile.png') }}" alt="Profile"
                    class="profile-img-large">
                {% endif %}
                <span class="user-name">{{ user.name if user and user.name else user.username if user else 'Guest'
                    }}</span>
            </div>
            <ul class="dropdown-menu-list">
                <li class="li">
                    <a href="{{ url_for('edit_profile') }}" target="_top">
                        <i class="ri-edit-box-line"></i> Edit Profile
                        <i class="ri-arrow-right-s-line arrow-icon"></i>
                    </a>
                </li>
                <li class="li">
                    <a href="#">
                        <i class="ri-settings-3-line"></i> Settings & Privacy
                        <i class="ri-arrow-right-s-line arrow-icon"></i>
                    </a>
                </li>
                <li class="li">
                    <a href="{{ url_for('contact') }}">
                        <i class="ri-question-line"></i> Help & Support
                        <i class="ri-arrow-right-s-line arrow-icon"></i>
                    </a>
                </li>
                <li class="li">
                    <a href="{{ url_for('logout') }}" target="_top">
                        <i class="ri-logout-box-line"></i> Logout
                        <i class="ri-arrow-right-s-line arrow-icon"></i>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
        integrity="sha512-7eHRwcbYkK4d9g/6tD/mhkf++eoTHwpNM9woBxtPUBWm67zeAfFC+HrdoE2GanKeocly/VxeLvIqwvCdk7qScg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>

        // import gsap from 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js'
        // This JavaScript is for the old iframe structure and can be removed or updated
        const pbtn = document.querySelector('.icon');
        pbtn.addEventListener('click', () => {
            document.querySelector('.profile-dropdown').classList.toggle('active');
            const pd = document.querySelector('.profile-dropdown')
            // var arr = [pd.children[0]];
            // Array.from(pd.children[1].children).forEach(e => {
            //     arr.push(e)
            // });
            // console.log(arr);
            if (pd.classList.contains('active')) {
                var tl = gsap.timeline();
                gsap.to('.profile-dropdown', {
                    opacity: 1,
                    // y: 20,
                    height: 'auto',

                    duration: 0.3,
                    delay: 0,
                });
                tl.from('.dropdown-header', {
                    x: '-100%',
                    duration: .1,
                    delay: 0,
                });
                tl.from('.li', {
                    x: '-100%',
                    duration: 0.1,
                    delay: 0,
                    
                    ease: "back.out(1)",
                    stagger: 0.1
                });
            }
            else {
                gsap.to('.profile-dropdown', {
                    opacity: 0,
                    // y: 20,
                    height: '0',

                    duration: 0.1,
                    delay: 0,
                });

            }
        });

        // You might want JavaScript here to toggle the dropdown on click instead of just hover
        const profileIconContainer = document.querySelector('.p-cont');
        const profileDropdown = document.querySelector('.profile-dropdown');

        // if (profileIconContainer && profileDropdown) {
        //     profileIconContainer.addEventListener('click', (event) => {
        //         // Prevent the click from closing the dropdown immediately
        //         event.stopPropagation();
        //         profileDropdown.style.display = profileDropdown.style.display === 'block' ? 'none' : 'block';
        //     });

        //     // Close the dropdown if clicked outside
        //     document.addEventListener('click', (event) => {
        //         if (!profileIconContainer.contains(event.target) && !profileDropdown.contains(event.target)) {
        //             profileDropdown.style.display = 'none';
        //         }
        //     });
        // }


        mermaid.initialize({ startOnLoad: false, theme: 'neutral' });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
        crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}">
    </script>
</body>

</html>